{"version":3,"sources":["server/controllers/customer.controller.js"],"names":["load","req","res","next","id","get","then","customer","catch","e","json","create","user","body","teams","location","save","savedCustomer","createCustomer","firstName","lastName","username","password","mobileNumber","emailAddress","savedUser","_id","isMerchant","updateLocation","updateTeams","update","list","query","limit","skip","customers","remove","deletedCustomer","listOfCustomersWithUserDetails","customersWithUserIds","updatedCustomers","map","x","y","JSON","stringify","push","all","getSales","fromDate","format","toDate","sales","promises","find","total","p","where","toString","gte","startOf","lte","endOf","orders","forEach","order","final_cost","name","getSalesByCustomer"],"mappings":"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","file":"customer.controller.js","sourceRoot":"../../../../.."}