{"version":3,"sources":["server/controllers/customer.controller.js"],"names":["load","req","res","next","id","get","then","customer","catch","e","json","create","user","firstName","body","lastName","username","password","mobileNumber","emailAddress","save","savedUser","_id","isMerchant","teams","location","name","franchise","savedCustomer","createCustomer","updateLocation","updateTeams","update","list","query","limit","skip","customers","remove","deletedCustomer","listOfCustomersWithUserDetails","customersWithUserIds","updatedCustomers","map","x","y","JSON","stringify","push","all","getSales","fromDate","format","toDate","sales","promises","find","total","p","where","toString","gte","startOf","lte","endOf","orders","forEach","order","final_cost","getSalesByCustomer"],"mappings":"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","file":"customer.controller.js","sourceRoot":"../../../../.."}