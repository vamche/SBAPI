{"version":3,"sources":["server/controllers/util.controller.js"],"names":["maxDistance","load","req","res","next","id","get","then","order","catch","e","json","assign","pilotId","team","getUnAssignedPilotsByTeam","where","near","center","from_location","pilots","length","validPilots","filter","pilot","_id","toString","isActive","save","unAssign","orderId","savedOrder","uploadImgAsync","img","Promise","resolve","reject","v2","uploader","upload","err","assignPending","console","info","pilotIDs","getUnAssigned","orders","forEach","findOne","in","to_location","status","updatedOrder","contents","en","title","from_address","filters","emit","error","find","pilotSelected","i","indexOf","push","calculateDistanceBetweenLatLongs","coordinates","latLongs","map","latitude","coordinate","longitude","getPathLength","calculateFinalCost","distance","timeInSeconds","minDistance","baseFare","finalCost","perKM","perHour","calculateDuration","fromTime","toTime","diff"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;AACA;;;;AAEA,IAAMA,cAAc,IAApB,C,CAA0B;;;AAG1B;;;AAGA,SAASC,IAAT,CAAcC,GAAd,EAAmBC,GAAnB,EAAwBC,IAAxB,EAA8BC,EAA9B,EAAkC;AAChC,kBAAMC,GAAN,CAAUD,EAAV,EACGE,IADH,CACQ,UAACC,KAAD,EAAW;AACfN,QAAIM,KAAJ,GAAYA,KAAZ,CADe,CACI;AACnB,WAAOJ,MAAP;AACD,GAJH,EAKGK,KALH,CAKS;AAAA,WAAKL,KAAKM,CAAL,CAAL;AAAA,GALT;AAMD;;AAED;;;;AAIA,SAASJ,GAAT,CAAaJ,GAAb,EAAkBC,GAAlB,EAAuB;AACrB,SAAOA,IAAIQ,IAAJ,CAAST,IAAIM,KAAb,CAAP;AACD;;AAED,SAASI,MAAT,CAAgBJ,KAAhB,EAAuBK,OAAvB,EAA+B;AAC7B,MAAGL,MAAMM,IAAN,IAAc,IAAd,IAAsBN,MAAMM,IAAN,IAAc,EAApC,IAA0CN,MAAMM,IAAN,IAAc,GAAxD,IAA+DN,MAAMM,IAAN,IAAc,KAA7E,IAAsFN,MAAMM,IAAN,IAAc,IAAvG,EAA4G;AAC1G,WAAO,gBAAUC,yBAAV,CAAoCP,MAAMM,IAA1C,EACJE,KADI,CACE,UADF,EACcC,IADd,CACmB;AACtBC,cAAQV,MAAMW,aADQ;AAEtBnB,mBAAaA,cAAc;AAFL,KADnB,EAKJO,IALI,CAKC,kBAAU;AACd,UAAGa,OAAOC,MAAP,GAAgB,CAAnB,EAAqB;AACnB,YAAIC,cAAcF,OAAOG,MAAP,CAAc;AAAA,iBAASC,MAAMC,GAAN,CAAUC,QAAV,MAAwBb,OAAjC;AAAA,SAAd,CAAlB;AACA,YAAIW,QAAQF,YAAY,CAAZ,CAAZ;AACAE,cAAMG,QAAN,GAAiB,IAAjB;AACA,eAAOH,MAAMI,IAAN,CAAWJ,KAAX,EACJjB,IADI,CACC,iBAAS;AACbC,gBAAMgB,KAAN,GAAcA,MAAMC,GAApB;AACA,iBAAOjB,MAAMoB,IAAN,CAAWpB,KAAX,CAAP;AACD,SAJI,CAAP;AAKD,OATD,MASM;AACJ,eAAOA,KAAP;AACD;AACF,KAlBI,CAAP;AAmBD,GApBD,MAoBK;AACH,WAAOA,KAAP;AACD;AACF;;AAED,SAASqB,QAAT,CAAkBC,OAAlB,EAA2BjB,OAA3B,EAAmC;AACjC,SAAO,gBAAMP,GAAN,CAAUwB,OAAV,EACJvB,IADI,CACC,iBACN;AACEC,UAAMgB,KAAN,GAAc,IAAd;AACA,WAAOhB,MAAMoB,IAAN,GACJrB,IADI,CACC,sBAAc;AAClBK,aAAOmB,UAAP,EAAmBlB,OAAnB;AACD,KAHI,CAAP;AAID,GARI,CAAP;AAUD;;AAED,SAASmB,cAAT,CAAwBC,GAAxB,EAA6B;AAC3B,SAAO,IAAIC,OAAJ,CAAY,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AAC5C,yBAAWC,EAAX,CAAcC,QAAd,CAAuBC,MAAvB,CAA8BN,GAA9B,EACE,UAASO,GAAT,EAAcrC,GAAd,EAAkB;AAChB,UAAGqC,GAAH,EAAQ;AACNJ,eAAOI,GAAP;AACD;AACDL,cAAQhC,GAAR;AACD,KANH;AAOD,GARM,CAAP;AASD;;AAED,SAASsC,aAAT,GAAwB;AACtBC,UAAQC,IAAR,CAAa,0BAAb;AACA,MAAMC,WAAW,EAAjB;AACA,kBAAMC,aAAN,GACGtC,IADH,CACQ,kBAAU;AACdmC,YAAQC,IAAR,CAAa,8BAA8BG,OAAOzB,MAAlD;AACAyB,WAAOC,OAAP,CAAe,iBAAS;AACtB,UAAGvC,MAAMM,IAAN,KAAe,IAAf,IAAuBN,MAAMM,IAAN,KAAe,EAAtC,IAA4CN,MAAMM,IAAN,KAAe,GAA3D,IAAkEN,MAAMM,IAAN,KAAe,KAApF,EAA0F;AACxF4B,gBAAQC,IAAR,CAAa,oBAAoBnC,MAAMM,IAAN,CAAWY,QAAX,EAAjC;AACA,wBAAMsB,OAAN,GACGhC,KADH,CACS,aADT,EACwB,IADxB,EAEGA,KAFH,CAES,OAFT,EAEkBiC,EAFlB,CAEqB,CAACzC,MAAMM,IAAP,CAFrB,EAGGE,KAHH,CAGS,UAHT,EAGqB,KAHrB,EAIGA,KAJH,CAIS,UAJT,EAIqBC,IAJrB,CAI0B;AACxBC,kBAAQV,MAAM0C,WADU;AAExBlD,uBAAaA,cAAc;AAFH,SAJ1B,EAQGO,IARH,CAQQ,iBAAS;AACbmC,kBAAQC,IAAR,CAAa,oCAAoCnB,KAAjD;AACA,cAAGA,SAASA,MAAMC,GAAlB,EAAsB;AACpBiB,oBAAQC,IAAR,CAAa,kCAAkCnB,MAAMC,GAAN,CAAUC,QAAV,EAA/C;AACAlB,kBAAMgB,KAAN,GAAcA,MAAMC,GAApB;AACAD,kBAAMG,QAAN,GAAiB,IAAjB;AACAnB,kBAAM2C,MAAN,GAAe,UAAf;AACA3C,kBAAMoB,IAAN,GACGrB,IADH,CACQ,UAAC6C,YAAD,EAAkB;AACtB,4BAAQC,QAAR,CAAiBC,EAAjB,iCAAkDF,aAAaG,KAA/D,iEACmCH,aAAaI,YADhD;AAEA,4BAAQC,OAAR,GAAkB,CAChB,EAAC,SAAS,KAAV,EAAiB,OAAO,OAAxB,EAAiC,YAAY,GAA7C,EAAkD,SAASL,aAAa5B,KAAb,CAAmBE,QAAnB,EAA3D,EADgB,EAEhB,EAAC,YAAa,IAAd,EAFgB,EAGhB,EAAC,SAAS,KAAV,EAAiB,OAAO,SAAxB,EAAmC,YAAY,GAA/C,EAAoD,SAAS,OAA7D,EAHgB,CAAlB;AAKA,6BAAM,YAAGgC,IAAH,CAAQ,eAAR,EAAyBN,YAAzB,CAAN;AACA;AACAV,sBAAQC,IAAR,CAAa,uBAAuBS,aAAaG,KAApC,GAA4C,MAA5C,GAAqDH,aAAa5B,KAAb,CAAmBE,QAAnB,EAAlE;AACAF,oBAAMI,IAAN;AACD,aAbH;AAcD;AACF,SA9BH,EA+BGnB,KA/BH,CA+BS;AAAA,iBAAKiC,QAAQiB,KAAR,CAAcjD,CAAd,CAAL;AAAA,SA/BT;AAgCD,OAlCD,MAkCK;AACHgC,gBAAQC,IAAR,CAAa,qBAAb;AACA,wBAAMiB,IAAN,GACG5C,KADH,CACS,aADT,EACwB,IADxB,EAEGA,KAFH,CAES,UAFT,EAEqB,KAFrB,EAGGA,KAHH,CAGS,UAHT,EAGqBC,IAHrB,CAG0B;AACtBC,kBAAQV,MAAM0C,WADQ;AAEtBlD,uBAAaA,cAAc;AAFL,SAH1B,EAOGO,IAPH,CAOQ,kBAAU;AACd,cAAIiB,QAAQ,IAAZ;AACA,cAAIJ,OAAOC,MAAX,EAAmB;AACjB,gBAAIwC,gBAAgB,KAApB;AACA,gBAAIC,IAAI,CAAR;AACA,mBAAM,CAACD,aAAP,EAAsB;AACpBrC,sBAAQJ,OAAO0C,CAAP,CAAR;AACA,kBAAIlB,SAASmB,OAAT,CAAiBvC,MAAMC,GAAN,CAAUC,QAAV,EAAjB,IAAyC,CAA7C,EAAgD;AAC9CmC,gCAAgB,IAAhB;AACD,eAFD,MAEO;AACLC;AACD;AACF;AACF;;AAEDpB,kBAAQC,IAAR,CAAa,oCAAoCnB,KAAjD;AACA,cAAGA,SAASA,MAAMC,GAAf,IAAsBmB,SAASmB,OAAT,CAAiBvC,MAAMC,GAAN,CAAUC,QAAV,EAAjB,IAAyC,CAAlE,EAAoE;AAClEkB,qBAASoB,IAAT,CAAcxC,MAAMC,GAAN,CAAUC,QAAV,EAAd;AACAgB,oBAAQC,IAAR,CAAa,kCAAkCnB,MAAMC,GAAN,CAAUC,QAAV,EAA/C;AACAlB,kBAAMgB,KAAN,GAAcA,MAAMC,GAApB;AACAD,kBAAMG,QAAN,GAAiB,IAAjB;AACAnB,kBAAM2C,MAAN,GAAe,UAAf;AACA3C,kBAAMoB,IAAN,GACGrB,IADH,CACQ,UAAC6C,YAAD,EAAkB;AACtB,4BAAQC,QAAR,CAAiBC,EAAjB,iCAAkDF,aAAaG,KAA/D,0CACYH,aAAaI,YADzB;AAEA,4BAAQC,OAAR,GAAkB,CAChB,EAAC,SAAS,KAAV,EAAiB,OAAO,OAAxB,EAAiC,YAAY,GAA7C,EAAkD,SAASL,aAAa5B,KAAb,CAAmBE,QAAnB,EAA3D,EADgB,EAEhB,EAAC,YAAa,IAAd,EAFgB,EAGhB,EAAC,SAAS,KAAV,EAAiB,OAAO,SAAxB,EAAmC,YAAY,GAA/C,EAAoD,SAAS,OAA7D,EAHgB,CAAlB;AAKA,6BAAM,YAAGgC,IAAH,CAAQ,eAAR,EAAyBN,YAAzB,CAAN;AACA;AACAV,sBAAQC,IAAR,CAAa,uBAAuBS,aAAaG,KAApC,GAA4C,MAA5C,GAAqDH,aAAa5B,KAAb,CAAmBE,QAAnB,EAAlE;AACAF,oBAAMI,IAAN;AACD,aAbH;AAcD;AACF,SA5CH,EA6CGnB,KA7CH,CA6CS;AAAA,iBAAKiC,QAAQiB,KAAR,CAAcjD,CAAd,CAAL;AAAA,SA7CT;AA+CD;AACF,KArFD;AAsFD,GAzFH;AA2FD;;AAED;;;;;AAKA,SAASuD,gCAAT,CAA0CC,WAA1C,EAAsD;AACpD,MAAMC,WAAWD,YAAYE,GAAZ,CAAgB,sBAAc;AAC7C,WAAO,EAAEC,UAAWC,WAAW,CAAX,CAAb;AACLC,iBAAYD,WAAW,CAAX;AADP,KAAP;AAGD,GAJgB,CAAjB;AAKA,SAAO,iBAAOE,aAAP,CAAqBL,QAArB,CAAP;AACD;;AAED;;;;;;AAMA,SAASM,kBAAT,CAA4BC,QAA5B,EAAsCC,aAAtC,EAAqD;AACnD,MAAMC,cAAc,IAApB;AACA,MAAMC,WAAW,EAAjB;AACA,MAAIC,YAAY,CAAhB;AACA,MAAIC,QAAQ,EAAZ;AACA,MAAIC,UAAU,EAAd;AACA,MAAGN,WAAWE,WAAd,EAA0B;AACxBE,gBAAYD,QAAZ;AACD,GAFD,MAEK;AACHC,gBAAYD,WAAa,CAACH,WAAWE,WAAZ,IAAyB,IAA1B,GAAgCG,KAA5C,GAAuDJ,gBAAc,IAAf,GAAqBK,OAAvF;AACD;AACD,SAAOF,SAAP;AACD;;AAED;;;;;;AAMA,SAASG,iBAAT,CAA2BC,QAA3B,EAAqCC,MAArC,EAA6C;AAC3C,SAAQ,sBAAOA,MAAP,EAAeC,IAAf,CAAoB,sBAAOF,QAAP,CAApB,CAAD,GAAwC,IAA/C;AACD;;kBAKc,EAAEtE,cAAF,EAAUiB,kBAAV,EAAoBG,8BAApB,EAAoCS,4BAApC;AACbwB,oEADa,EACqBgB,oCADrB,EACwCR,sCADxC,E","file":"util.controller.js","sourceRoot":"../../../../.."}