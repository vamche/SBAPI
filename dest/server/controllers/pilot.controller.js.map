{"version":3,"sources":["server/controllers/pilot.controller.js"],"names":["load","req","res","next","id","get","then","pilot","catch","e","json","getUnAssignedPilotsByTeam","team","find","where","create","pilotId","body","userId","teams","location","save","savedPilot","createPilot","user","firstName","lastName","username","password","mobileNumber","emailAddress","customer","savedUser","_id","toString","savedCustomer","updateLocation","battery","isAvailable","status","updateTeams","update","latitude","longitude","isActive","list","query","limit","skip","pilots","remove","deletedPilot","listOfPilotsWithUserDetails","promises","updatedPilots","map","pilotToBeUpdated","p","JSON","stringify","push","all","getSales","fromDate","format","toDate","sales","total","gte","startOf","lte","endOf","orders","forEach","order","final_cost","name","getSalesByPilot","getTimesheets","times","sort","createdAt","diff","len","timesheets","timesheet","unix","length","getTimesheetsByPilot"],"mappings":"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","file":"pilot.controller.js","sourceRoot":"../../../../.."}